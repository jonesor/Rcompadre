<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Apply a function element-wise to a list of matrices — mpm_elementwise_apply • Rcompadre</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Apply a function element-wise to a list of matrices — mpm_elementwise_apply"><meta name="description" content="This function applies a specified function element-wise to the corresponding
elements across a list of matrices."><meta property="og:description" content="This function applies a specified function element-wise to the corresponding
elements across a list of matrices."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Rcompadre</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/a01_GettingStarted.html">Getting started with Rcompadre</a></li>
    <li><a class="dropdown-item" href="../articles/a02_RcompadreTidy.html">Using Rcompadre with the tidyverse</a></li>
    <li><a class="dropdown-item" href="../articles/a03_VectorisingRcompadre.html">Vectorising with Rcompadre</a></li>
    <li><a class="dropdown-item" href="../articles/a04_ObtainingReferences.html">Obtaining references</a></li>
    <li><a class="dropdown-item" href="../articles/a05_UsingYourOwnData.html">Using your own matrix data</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/jonesor/Rcompadre/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Apply a function element-wise to a list of matrices</h1>
      <small class="dont-index">Source: <a href="https://github.com/jonesor/Rcompadre/blob/HEAD/R/mpm_elementwise_apply.R"><code>R/mpm_elementwise_apply.R</code></a></small>
      <div class="d-none name"><code>mpm_elementwise_apply.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function applies a specified function element-wise to the corresponding
elements across a list of matrices.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mat_elementwise_apply</span><span class="op">(</span><span class="va">x</span>, <span class="va">fun</span>, na_handling <span class="op">=</span> <span class="st">"stop"</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">mpm_elementwise_apply</span><span class="op">(</span><span class="va">x</span>, <span class="va">fun</span>, na_handling <span class="op">=</span> <span class="st">"stop"</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A list of matrices.</p></dd>


<dt id="arg-fun">fun<a class="anchor" aria-label="anchor" href="#arg-fun"></a></dt>
<dd><p>The function to apply to the elements.</p></dd>


<dt id="arg-na-handling">na_handling<a class="anchor" aria-label="anchor" href="#arg-na-handling"></a></dt>
<dd><p>A character string specifying how to handle NA values.
Possible values are "stop" (throw an error when NA values are encountered),
"zero" (convert NA values to 0), and "ignore" (NA values are ignored and
passed to `fun`). Handling can then be processed appropriately by that
function (e.g., with `na.rm`).</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to `fun`.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A matrix containing the result of applying the function element-wise
  to the corresponding elements across the matrices.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other data management:
<code><a href="cdb_flatten.html">cdb_flatten</a>()</code>,
<code><a href="cdb_id_stages.html">cdb_id_stages</a>()</code>,
<code><a href="cdb_id_studies.html">cdb_id_studies</a>()</code>,
<code><a href="cdb_id.html">cdb_id</a>()</code>,
<code><a href="cdb_mean_matF.html">cdb_mean_matF</a>()</code>,
<code><a href="cdb_rbind.html">cdb_rbind</a>()</code>,
<code><a href="cdb_unflatten.html">cdb_unflatten</a>()</code>,
<code><a href="cdb_unnest.html">cdb_unnest</a>()</code>,
<code><a href="mpm_mean.html">mpm_mean</a>()</code>,
<code><a href="mpm_median.html">mpm_median</a>()</code>,
<code><a href="mpm_sd.html">mpm_sd</a>()</code>,
<code><a href="string_representation.html">string_representation</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">mpms</span> <span class="op">&lt;-</span> <span class="va">Compadre</span><span class="op">$</span><span class="va">mat</span><span class="op">[</span><span class="va">Compadre</span><span class="op">$</span><span class="va">SpeciesAuthor</span> <span class="op">==</span> <span class="st">"Haplopappus_radiatus"</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#The object mpms is a list, containing compadre objects</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">mpms</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "list"</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">mpms</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "CompadreMat"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"package")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Rcompadre"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get the mean, max and min for the matrices</span></span></span>
<span class="r-in"><span><span class="fu">mpm_elementwise_apply</span><span class="op">(</span><span class="va">mpms</span>, <span class="va">mean</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   MatrixClassOrganized  MatrixClassAuthor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1               active           Seedling</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2               active Small reproductive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3               active Large reproductive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4               active       Reproductive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matA:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         1      2       3       4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.00000 0.0000 0.00000 1.96575</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.19725 0.4090 0.17650 0.15400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.03250 0.1605 0.38175 0.37500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.00000 0.1175 0.26100 0.37150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matU:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         1      2       3      4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.00000 0.0000 0.00000 0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.19725 0.4090 0.17650 0.1540</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.03250 0.1605 0.38175 0.3750</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.00000 0.1175 0.26100 0.3715</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matF:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1 2 3       4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0 0 0 1.96575</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0 0 0 0.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0 0 0 0.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0 0 0 0.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matC:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1 2 3 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">mpm_elementwise_apply</span><span class="op">(</span><span class="va">mpms</span>, <span class="va">max</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   MatrixClassOrganized  MatrixClassAuthor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1               active           Seedling</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2               active Small reproductive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3               active Large reproductive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4               active       Reproductive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matA:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       1     2     3     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.000 0.000 0.000 4.033</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.385 0.800 0.333 0.449</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.095 0.246 0.673 0.750</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.000 0.316 0.566 0.621</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matU:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       1     2     3     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.000 0.000 0.000 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.385 0.800 0.333 0.449</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.095 0.246 0.673 0.750</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.000 0.316 0.566 0.621</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matF:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1 2 3     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0 0 0 4.033</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0 0 0 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0 0 0 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0 0 0 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matC:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1 2 3 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">mpm_elementwise_apply</span><span class="op">(</span><span class="va">mpms</span>, <span class="va">min</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   MatrixClassOrganized  MatrixClassAuthor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1               active           Seedling</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2               active Small reproductive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3               active Large reproductive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4               active       Reproductive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matA:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       1     2     3     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.000 0.000 0.000 0.735</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.013 0.158 0.019 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.000 0.024 0.200 0.143</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.000 0.000 0.096 0.250</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matU:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       1     2     3     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.000 0.000 0.000 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.013 0.158 0.019 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.000 0.024 0.200 0.143</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.000 0.000 0.096 0.250</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matF:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1 2 3     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0 0 0 0.735</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0 0 0 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0 0 0 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0 0 0 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matC:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1 2 3 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># extract list of matA and take mean</span></span></span>
<span class="r-in"><span><span class="va">mats</span> <span class="op">&lt;-</span> <span class="fu"><a href="CompadreMatrixMethods.html">matA</a></span><span class="op">(</span><span class="va">mpms</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">mat_elementwise_apply</span><span class="op">(</span><span class="va">mats</span>, <span class="va">mean</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         [,1]   [,2]    [,3]    [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.00000 0.0000 0.00000 1.96575</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 0.19725 0.4090 0.17650 0.15400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 0.03250 0.1605 0.38175 0.37500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 0.00000 0.1175 0.26100 0.37150</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># This should be the same as mat_mean()</span></span></span>
<span class="r-in"><span><span class="fu"><a href="mpm_mean.html">mat_mean</a></span><span class="op">(</span><span class="va">mats</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         A1     A2      A3      A4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A1 0.00000 0.0000 0.00000 1.96575</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A2 0.19725 0.4090 0.17650 0.15400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A3 0.03250 0.1605 0.38175 0.37500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A4 0.00000 0.1175 0.26100 0.37150</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Mean values, with 25% trimmed from each end</span></span></span>
<span class="r-in"><span><span class="fu">mat_elementwise_apply</span><span class="op">(</span><span class="va">mats</span>, <span class="va">mean</span>, trim <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        [,1]  [,2]  [,3]   [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.0000 0.000 0.000 1.5475</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 0.1955 0.339 0.177 0.0835</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 0.0175 0.186 0.327 0.3035</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 0.0000 0.077 0.191 0.3075</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># weighted mean, where the second matrix is weighted to 100% and the others to 0%</span></span></span>
<span class="r-in"><span><span class="co"># do demonstrate usage. The result should be the same as mats[[2]]</span></span></span>
<span class="r-in"><span><span class="fu">mat_elementwise_apply</span><span class="op">(</span><span class="va">mats</span>, <span class="va">weighted.mean</span>, w <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,1]  [,2]  [,3]  [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.000 0.000 0.000 4.033</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 0.105 0.483 0.154 0.167</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 0.035 0.172 0.673 0.400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 0.000 0.081 0.096 0.350</span>
<span class="r-in"><span><span class="va">mats</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       A1    A2    A3    A4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A1 0.000 0.000 0.000 4.033</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A2 0.105 0.483 0.154 0.167</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A3 0.035 0.172 0.673 0.400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A4 0.000 0.081 0.096 0.350</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#min and max values</span></span></span>
<span class="r-in"><span><span class="fu">mat_elementwise_apply</span><span class="op">(</span><span class="va">mats</span>, <span class="va">min</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,1]  [,2]  [,3]  [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.000 0.000 0.000 0.735</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 0.013 0.158 0.019 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 0.000 0.024 0.200 0.143</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 0.000 0.000 0.096 0.250</span>
<span class="r-in"><span><span class="fu">mat_elementwise_apply</span><span class="op">(</span><span class="va">mats</span>, <span class="va">max</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,1]  [,2]  [,3]  [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.000 0.000 0.000 4.033</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 0.385 0.800 0.333 0.449</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 0.095 0.246 0.673 0.750</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 0.000 0.316 0.566 0.621</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Demonstrating NA handling</span></span></span>
<span class="r-in"><span><span class="co">#First adding some NA values to the matrices</span></span></span>
<span class="r-in"><span><span class="va">mats</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">3</span>,<span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#replace the NA with a 0</span></span></span>
<span class="r-in"><span><span class="fu">mat_elementwise_apply</span><span class="op">(</span><span class="va">mats</span>, <span class="va">min</span>, na_handling <span class="op">=</span> <span class="st">"zero"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,1]  [,2]  [,3]  [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.000 0.000 0.000 0.735</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 0.013 0.158 0.019 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 0.000 0.000 0.200 0.143</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 0.000 0.000 0.096 0.250</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#ignore the NA</span></span></span>
<span class="r-in"><span><span class="fu">mat_elementwise_apply</span><span class="op">(</span><span class="va">mats</span>, <span class="va">min</span>, na_handling <span class="op">=</span> <span class="st">"ignore"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,1]  [,2]  [,3]  [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.000 0.000 0.000 0.735</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 0.013 0.158 0.019 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 0.000    NA 0.200 0.143</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 0.000 0.000 0.096 0.250</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#ignore the NA, but pass na.rm = TRUE to the function (min)</span></span></span>
<span class="r-in"><span><span class="fu">mat_elementwise_apply</span><span class="op">(</span><span class="va">mats</span>, <span class="va">min</span>, na_handling <span class="op">=</span> <span class="st">"ignore"</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,1]  [,2]  [,3]  [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.000 0.000 0.000 0.735</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 0.013 0.158 0.019 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 0.000 0.024 0.200 0.143</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 0.000 0.000 0.096 0.250</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Patrick Barks, Danny Buss, Roberto Salguero-Gomez, Iain Stott, William K. Petry, Tamora James, Owen Jones, Julia Jones, Gesa Römer, Sam Levin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

