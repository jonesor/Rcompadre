<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Apply a function element-wise to a list of matrices — mpm_elementwise_apply • Rcompadre</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Apply a function element-wise to a list of matrices — mpm_elementwise_apply"><meta property="og:description" content="This function applies a specified function element-wise to the corresponding
elements across a list of matrices."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Rcompadre</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/a01_GettingStarted.html">Getting started with Rcompadre</a>
    </li>
    <li>
      <a href="../articles/a02_RcompadreTidy.html">Using Rcompadre with the tidyverse</a>
    </li>
    <li>
      <a href="../articles/a03_VectorisingRcompadre.html">Vectorising with Rcompadre</a>
    </li>
    <li>
      <a href="../articles/a04_ObtainingReferences.html">Obtaining references</a>
    </li>
    <li>
      <a href="../articles/a05_UsingYourOwnData.html">Using your own matrix data</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/jonesor/Rcompadre/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Apply a function element-wise to a list of matrices</h1>
    <small class="dont-index">Source: <a href="https://github.com/jonesor/Rcompadre/blob/HEAD/R/mpm_elementwise_apply.R" class="external-link"><code>R/mpm_elementwise_apply.R</code></a></small>
    <div class="hidden name"><code>mpm_elementwise_apply.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function applies a specified function element-wise to the corresponding
elements across a list of matrices.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mat_elementwise_apply</span><span class="op">(</span><span class="va">x</span>, <span class="va">fun</span>, na_handling <span class="op">=</span> <span class="st">"stop"</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">mpm_elementwise_apply</span><span class="op">(</span><span class="va">x</span>, <span class="va">fun</span>, na_handling <span class="op">=</span> <span class="st">"stop"</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A list of matrices.</p></dd>


<dt id="arg-fun">fun<a class="anchor" aria-label="anchor" href="#arg-fun"></a></dt>
<dd><p>The function to apply to the elements.</p></dd>


<dt id="arg-na-handling">na_handling<a class="anchor" aria-label="anchor" href="#arg-na-handling"></a></dt>
<dd><p>A character string specifying how to handle NA values.
Possible values are "stop" (throw an error when NA values are encountered),
"zero" (convert NA values to 0), and "ignore" (NA values are ignored and
passed to `fun`). Handling can then be processed appropriately by that
function (e.g., with `na.rm`).</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to `fun`.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A matrix containing the result of applying the function element-wise
  to the corresponding elements across the matrices.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other data management:
<code><a href="cdb_flatten.html">cdb_flatten</a>()</code>,
<code><a href="cdb_id_stages.html">cdb_id_stages</a>()</code>,
<code><a href="cdb_id_studies.html">cdb_id_studies</a>()</code>,
<code><a href="cdb_id.html">cdb_id</a>()</code>,
<code><a href="cdb_mean_matF.html">cdb_mean_matF</a>()</code>,
<code><a href="cdb_rbind.html">cdb_rbind</a>()</code>,
<code><a href="cdb_unflatten.html">cdb_unflatten</a>()</code>,
<code><a href="cdb_unnest.html">cdb_unnest</a>()</code>,
<code><a href="mpm_mean.html">mpm_mean</a>()</code>,
<code><a href="mpm_median.html">mpm_median</a>()</code>,
<code><a href="mpm_sd.html">mpm_sd</a>()</code>,
<code><a href="string_representation.html">string_representation</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">mpms</span> <span class="op">&lt;-</span> <span class="va">Compadre</span><span class="op">$</span><span class="va">mat</span><span class="op">[</span><span class="va">Compadre</span><span class="op">$</span><span class="va">SpeciesAuthor</span> <span class="op">==</span> <span class="st">"Haplopappus_radiatus"</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#The object mpms is a list, containing compadre objects</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">mpms</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "list"</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">mpms</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "CompadreMat"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"package")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Rcompadre"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get the mean, max and min for the matrices</span></span></span>
<span class="r-in"><span><span class="fu">mpm_elementwise_apply</span><span class="op">(</span><span class="va">mpms</span>, <span class="va">mean</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   MatrixClassOrganized  MatrixClassAuthor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1               active           Seedling</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2               active Small reproductive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3               active Large reproductive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4               active       Reproductive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matA:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         1      2       3       4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.00000 0.0000 0.00000 1.96575</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.19725 0.4090 0.17650 0.15400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.03250 0.1605 0.38175 0.37500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.00000 0.1175 0.26100 0.37150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matU:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         1      2       3      4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.00000 0.0000 0.00000 0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.19725 0.4090 0.17650 0.1540</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.03250 0.1605 0.38175 0.3750</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.00000 0.1175 0.26100 0.3715</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matF:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1 2 3       4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0 0 0 1.96575</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0 0 0 0.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0 0 0 0.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0 0 0 0.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matC:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1 2 3 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">mpm_elementwise_apply</span><span class="op">(</span><span class="va">mpms</span>, <span class="va">max</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   MatrixClassOrganized  MatrixClassAuthor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1               active           Seedling</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2               active Small reproductive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3               active Large reproductive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4               active       Reproductive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matA:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       1     2     3     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.000 0.000 0.000 4.033</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.385 0.800 0.333 0.449</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.095 0.246 0.673 0.750</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.000 0.316 0.566 0.621</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matU:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       1     2     3     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.000 0.000 0.000 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.385 0.800 0.333 0.449</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.095 0.246 0.673 0.750</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.000 0.316 0.566 0.621</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matF:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1 2 3     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0 0 0 4.033</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0 0 0 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0 0 0 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0 0 0 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matC:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1 2 3 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">mpm_elementwise_apply</span><span class="op">(</span><span class="va">mpms</span>, <span class="va">min</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   MatrixClassOrganized  MatrixClassAuthor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1               active           Seedling</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2               active Small reproductive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3               active Large reproductive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4               active       Reproductive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matA:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       1     2     3     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.000 0.000 0.000 0.735</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.013 0.158 0.019 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.000 0.024 0.200 0.143</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.000 0.000 0.096 0.250</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matU:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       1     2     3     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.000 0.000 0.000 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.013 0.158 0.019 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.000 0.024 0.200 0.143</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.000 0.000 0.096 0.250</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matF:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1 2 3     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0 0 0 0.735</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0 0 0 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0 0 0 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0 0 0 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> matC:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1 2 3 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0 0 0 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># extract list of matA and take mean</span></span></span>
<span class="r-in"><span><span class="va">mats</span> <span class="op">&lt;-</span> <span class="fu"><a href="CompadreMatrixMethods.html">matA</a></span><span class="op">(</span><span class="va">mpms</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">mat_elementwise_apply</span><span class="op">(</span><span class="va">mats</span>, <span class="va">mean</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         [,1]   [,2]    [,3]    [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.00000 0.0000 0.00000 1.96575</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 0.19725 0.4090 0.17650 0.15400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 0.03250 0.1605 0.38175 0.37500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 0.00000 0.1175 0.26100 0.37150</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># This should be the same as mat_mean()</span></span></span>
<span class="r-in"><span><span class="fu"><a href="mpm_mean.html">mat_mean</a></span><span class="op">(</span><span class="va">mats</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         A1     A2      A3      A4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A1 0.00000 0.0000 0.00000 1.96575</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A2 0.19725 0.4090 0.17650 0.15400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A3 0.03250 0.1605 0.38175 0.37500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A4 0.00000 0.1175 0.26100 0.37150</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Mean values, with 25% trimmed from each end</span></span></span>
<span class="r-in"><span><span class="fu">mat_elementwise_apply</span><span class="op">(</span><span class="va">mats</span>, <span class="va">mean</span>, trim <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        [,1]  [,2]  [,3]   [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.0000 0.000 0.000 1.5475</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 0.1955 0.339 0.177 0.0835</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 0.0175 0.186 0.327 0.3035</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 0.0000 0.077 0.191 0.3075</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># weighted mean, where the second matrix is weighted to 100% and the others to 0%</span></span></span>
<span class="r-in"><span><span class="co"># do demonstrate usage. The result should be the same as mats[[2]]</span></span></span>
<span class="r-in"><span><span class="fu">mat_elementwise_apply</span><span class="op">(</span><span class="va">mats</span>, <span class="va">weighted.mean</span>, w <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,1]  [,2]  [,3]  [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.000 0.000 0.000 4.033</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 0.105 0.483 0.154 0.167</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 0.035 0.172 0.673 0.400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 0.000 0.081 0.096 0.350</span>
<span class="r-in"><span><span class="va">mats</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       A1    A2    A3    A4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A1 0.000 0.000 0.000 4.033</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A2 0.105 0.483 0.154 0.167</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A3 0.035 0.172 0.673 0.400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A4 0.000 0.081 0.096 0.350</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#min and max values</span></span></span>
<span class="r-in"><span><span class="fu">mat_elementwise_apply</span><span class="op">(</span><span class="va">mats</span>, <span class="va">min</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,1]  [,2]  [,3]  [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.000 0.000 0.000 0.735</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 0.013 0.158 0.019 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 0.000 0.024 0.200 0.143</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 0.000 0.000 0.096 0.250</span>
<span class="r-in"><span><span class="fu">mat_elementwise_apply</span><span class="op">(</span><span class="va">mats</span>, <span class="va">max</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,1]  [,2]  [,3]  [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.000 0.000 0.000 4.033</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 0.385 0.800 0.333 0.449</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 0.095 0.246 0.673 0.750</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 0.000 0.316 0.566 0.621</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Demonstrating NA handling</span></span></span>
<span class="r-in"><span><span class="co">#First adding some NA values to the matrices</span></span></span>
<span class="r-in"><span><span class="va">mats</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">3</span>,<span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#replace the NA with a 0</span></span></span>
<span class="r-in"><span><span class="fu">mat_elementwise_apply</span><span class="op">(</span><span class="va">mats</span>, <span class="va">min</span>, na_handling <span class="op">=</span> <span class="st">"zero"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,1]  [,2]  [,3]  [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.000 0.000 0.000 0.735</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 0.013 0.158 0.019 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 0.000 0.000 0.200 0.143</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 0.000 0.000 0.096 0.250</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#ignore the NA</span></span></span>
<span class="r-in"><span><span class="fu">mat_elementwise_apply</span><span class="op">(</span><span class="va">mats</span>, <span class="va">min</span>, na_handling <span class="op">=</span> <span class="st">"ignore"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,1]  [,2]  [,3]  [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.000 0.000 0.000 0.735</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 0.013 0.158 0.019 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 0.000    NA 0.200 0.143</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 0.000 0.000 0.096 0.250</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#ignore the NA, but pass na.rm = TRUE to the function (min)</span></span></span>
<span class="r-in"><span><span class="fu">mat_elementwise_apply</span><span class="op">(</span><span class="va">mats</span>, <span class="va">min</span>, na_handling <span class="op">=</span> <span class="st">"ignore"</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,1]  [,2]  [,3]  [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.000 0.000 0.000 0.735</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 0.013 0.158 0.019 0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 0.000 0.024 0.200 0.143</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 0.000 0.000 0.096 0.250</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Patrick Barks, Danny Buss, Roberto Salguero-Gomez, Iain Stott, William K. Petry, Tamora James, Owen Jones, Julia Jones, Gesa Römer, Sam Levin.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

