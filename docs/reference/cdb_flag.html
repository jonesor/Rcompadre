<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Flag potential issues in matrices of a COM(P)ADRE database — cdb_flag • Rcompadre</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Flag potential issues in matrices of a COM(P)ADRE database — cdb_flag"><meta property="og:description" content="Adds columns to the data slot of a `CompadreDB` object that flag potential
problems in the matrix population models. These columns can subsequently be
used to subset the database by logical argument.
Optional checks include:
check_NA_A: missing values in `matA`? Missing (`NA`) values in
  matrices prevent most calculations using those matrices.
check_NA_U: missing values in `matU`? Missing (`NA`) values in
  matrices prevent most calculations using those matrices.
check_NA_F: missing values in `matF`? Missing (`NA`) values in
  matrices prevent most calculations using those matrices.
check_NA_C: missing values in `matC`? Missing (`NA`) values in
  matrices prevent most calculations using those matrices.
check_zero_U: `matU` all zeros (including `NA`)? Submatrices
  composed entirely of zero values can be problematic. There may be good
  biological reasons for this phenomenon. For example, in the particular
  focal population in the particular focal year, there was truly zero
  survival recorded. Nevertheless, zero-value submatrices can cause some
  calculations to fail and it may be necessary to exclude them.
check_zero_F: `matF` all zeros (including `NA`)? Submatrices
  composed entirely of zero values can be problematic. There may be good
  biological reasons for this phenomenon. For example, in the particular
  focal population in the particular focal year, there was truly zero
  reproduction recorded. Nevertheless, zero-value submatrices can cause some
  calculations to fail and it may be necessary to exclude them.
check_zero_U_colsum: Columns of `matU` that sum to zero imply
  that there is is no survival from that particular stage. This may be a
  perfectly valid parameterisation for a particular year/place but is
  biologically unreasonable in the longer term and users may wish to exclude
  problematic matrices from their analysis.
check_singular_U: `matU` singular? Matrices are said to be
  singular if they cannot be inverted. Inversion is required for many matrix
  calculations and, therefore, singularity can cause some calculations to
  fail.
check_component_sum: do `matU`/`matF`/`matC` submatrices sum
  to `matA` (see Details)? A complete MPM (`matA`) can be split into
  its component submatrices (i.e., `matU`, `matF` and  `matC`). The sum of
  these submatrices should equal the complete MPM (i.e., `matA` = `matU` +
  `matF` + `matC`). Sometimes, however, errors occur so that the submatrices
  do NOT sum to `matA`. Normally, this is caused by rounding errors, but more
  significant errors are possible.
check_ergodic: is `matA` ergodic (see
  isErgodic)? Some matrix calculations require that
  the MPM (`matA`) be ergodic. Ergodic MPMs are those where there is a single
  asymptotic stable state that does not depend on initial stage structure.
  Conversely, non-ergodic MPMs are those where there are multiple asymptotic
  stable states, which depend on initial stage structure. MPMs that are
  non-ergodic are usually biologically unreasonable, both in terms of their
  life cycle description and their projected dynamics. They cause some
  calculations to fail.
check_irreducible: is `matA` irreducible (see
  isIrreducible)? Some matrix calculations require
  that the MPM (`matA`) be irreducible. Irreducible MPMs are those where
  parameterised transition rates facilitate pathways from all stages to all
  other stages. Conversely, reducible MPMs depict incomplete life cycles
  where pathways from all stages to every other stage are not possible. MPMs
  that are reducible are usually biologically unreasonable, both in terms of
  their life cycle description and their projected dynamics. They cause some
  calculations to fail. Irreducibility is necessary but not sufficient for
  ergodicity.
check_primitive: is `matA` primitive (see
  isPrimitive)? A primitive matrix is non-negative
  matrix that is irreducible and has only a single eigenvalue of maximum
  modulus. This check is therefore redundant due to the overlap with
  `check_irreducible` and `checkErdogic`.
check_surv_gte_1: does `matU` contains values that are equal
  to or greater than 1? Survival is bounded between 0 and 1. Values in excess
  of 1 are biologically unreasonable.

"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Rcompadre</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/a01_GettingStarted.html">Getting started with Rcompadre</a>
    </li>
    <li>
      <a href="../articles/a02_RcompadreTidy.html">Using Rcompadre with the tidyverse</a>
    </li>
    <li>
      <a href="../articles/a03_VectorisingRcompadre.html">Vectorising with Rcompadre</a>
    </li>
    <li>
      <a href="../articles/a04_ObtainingReferences.html">Obtaining references</a>
    </li>
    <li>
      <a href="../articles/a05_UsingYourOwnData.html">Using your own matrix data</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/jonesor/Rcompadre/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Flag potential issues in matrices of a COM(P)ADRE database</h1>
    <small class="dont-index">Source: <a href="https://github.com/jonesor/Rcompadre/blob/HEAD/R/cdb_flag.R" class="external-link"><code>R/cdb_flag.R</code></a></small>
    <div class="hidden name"><code>cdb_flag.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Adds columns to the data slot of a `CompadreDB` object that flag potential
problems in the matrix population models. These columns can subsequently be
used to subset the database by logical argument.</p>
<p>Optional checks include:</p><ul><li><p><code>check_NA_A</code>: missing values in `matA`? Missing (`NA`) values in
  matrices prevent most calculations using those matrices.</p></li>
<li><p><code>check_NA_U</code>: missing values in `matU`? Missing (`NA`) values in
  matrices prevent most calculations using those matrices.</p></li>
<li><p><code>check_NA_F</code>: missing values in `matF`? Missing (`NA`) values in
  matrices prevent most calculations using those matrices.</p></li>
<li><p><code>check_NA_C</code>: missing values in `matC`? Missing (`NA`) values in
  matrices prevent most calculations using those matrices.</p></li>
<li><p><code>check_zero_U</code>: `matU` all zeros (including `NA`)? Submatrices
  composed entirely of zero values can be problematic. There may be good
  biological reasons for this phenomenon. For example, in the particular
  focal population in the particular focal year, there was truly zero
  survival recorded. Nevertheless, zero-value submatrices can cause some
  calculations to fail and it may be necessary to exclude them.</p></li>
<li><p><code>check_zero_F</code>: `matF` all zeros (including `NA`)? Submatrices
  composed entirely of zero values can be problematic. There may be good
  biological reasons for this phenomenon. For example, in the particular
  focal population in the particular focal year, there was truly zero
  reproduction recorded. Nevertheless, zero-value submatrices can cause some
  calculations to fail and it may be necessary to exclude them.</p></li>
<li><p><code>check_zero_U_colsum</code>: Columns of `matU` that sum to zero imply
  that there is is no survival from that particular stage. This may be a
  perfectly valid parameterisation for a particular year/place but is
  biologically unreasonable in the longer term and users may wish to exclude
  problematic matrices from their analysis.</p></li>
<li><p><code>check_singular_U</code>: `matU` singular? Matrices are said to be
  singular if they cannot be inverted. Inversion is required for many matrix
  calculations and, therefore, singularity can cause some calculations to
  fail.</p></li>
<li><p><code>check_component_sum</code>: do `matU`/`matF`/`matC` submatrices sum
  to `matA` (see <em>Details</em>)? A complete MPM (`matA`) can be split into
  its component submatrices (i.e., `matU`, `matF` and  `matC`). The sum of
  these submatrices should equal the complete MPM (i.e., `matA` = `matU` +
  `matF` + `matC`). Sometimes, however, errors occur so that the submatrices
  do NOT sum to `matA`. Normally, this is caused by rounding errors, but more
  significant errors are possible.</p></li>
<li><p><code>check_ergodic</code>: is `matA` ergodic (see
  <code><a href="https://rdrr.io/pkg/popdemo/man/isErgodic.html" class="external-link">isErgodic</a></code>)? Some matrix calculations require that
  the MPM (`matA`) be ergodic. Ergodic MPMs are those where there is a single
  asymptotic stable state that does not depend on initial stage structure.
  Conversely, non-ergodic MPMs are those where there are multiple asymptotic
  stable states, which depend on initial stage structure. MPMs that are
  non-ergodic are usually biologically unreasonable, both in terms of their
  life cycle description and their projected dynamics. They cause some
  calculations to fail.</p></li>
<li><p><code>check_irreducible</code>: is `matA` irreducible (see
  <code><a href="https://rdrr.io/pkg/popdemo/man/isIrreducible.html" class="external-link">isIrreducible</a></code>)? Some matrix calculations require
  that the MPM (`matA`) be irreducible. Irreducible MPMs are those where
  parameterised transition rates facilitate pathways from all stages to all
  other stages. Conversely, reducible MPMs depict incomplete life cycles
  where pathways from all stages to every other stage are not possible. MPMs
  that are reducible are usually biologically unreasonable, both in terms of
  their life cycle description and their projected dynamics. They cause some
  calculations to fail. Irreducibility is necessary but not sufficient for
  ergodicity.</p></li>
<li><p><code>check_primitive</code>: is `matA` primitive (see
  <code><a href="https://rdrr.io/pkg/popdemo/man/isPrimitive.html" class="external-link">isPrimitive</a></code>)? A primitive matrix is non-negative
  matrix that is irreducible and has only a single eigenvalue of maximum
  modulus. This check is therefore redundant due to the overlap with
  `check_irreducible` and `checkErdogic`.</p></li>
<li><p><code>check_surv_gte_1</code>: does `matU` contains values that are equal
  to or greater than 1? Survival is bounded between 0 and 1. Values in excess
  of 1 are biologically unreasonable.</p></li>
</ul></div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cdb_flag</span><span class="op">(</span></span>
<span>  <span class="va">cdb</span>,</span>
<span>  checks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"check_NA_A"</span>, <span class="st">"check_NA_U"</span>, <span class="st">"check_NA_F"</span>, <span class="st">"check_NA_C"</span>, <span class="st">"check_zero_U"</span>,</span>
<span>    <span class="st">"check_zero_F"</span>, <span class="st">"check_zero_C"</span>, <span class="st">"check_zero_U_colsum"</span>, <span class="st">"check_singular_U"</span>,</span>
<span>    <span class="st">"check_component_sum"</span>, <span class="st">"check_ergodic"</span>, <span class="st">"check_irreducible"</span>, <span class="st">"check_primitive"</span>,</span>
<span>    <span class="st">"check_surv_gte_1"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>cdb</dt>
<dd><p>A CompadreDB object</p></dd>


<dt>checks</dt>
<dd><p>Character vector specifying which checks to run.</p>
<p>Defaults to all, i.e. <code>c("check_NA_A", "check_NA_U", "check_NA_F",
  "check_NA_C", "check_zero_U", "check_singular_U", "check_component_sum",
  "check_ergodic", "check_irreducible", "check_primitive",
  "check_surv_gte_1")</code></p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Returns <code>cdb</code> with extra columns appended to the data slot
  (columns have the same names as the corresponding elements of</p>
<p></p>
<p><code>checks</code>) to indicate (TRUE/FALSE) whether there are potential
  problems with the matrices corresponding to a given row of the data.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>For the flag <code>check_component_sum</code>, a value of <code>NA</code> will be
returned if the matrix sum of matU, matF, and matC consists only of zeros
and/or <code>NA</code>, indicating that the matrix has not been split.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Stott, I., Townley, S., &amp; Carslake, D. 2010. On reducibility and
  ergodicity of population projection matrix models. Methods in Ecology and
  Evolution. 1 (3), 242-252</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other data checking: 
<code><a href="cdb_check_species.html">cdb_check_species</a>()</code>,
<code><a href="cdb_collapse.html">cdb_collapse</a>()</code>,
<code><a href="cdb_compare.html">cdb_compare</a>()</code>,
<code><a href="mpm_methods.html">mpm_methods</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Owen Jones &lt;jones@biology.sdu.dk&gt;</p>
<p>Julia Jones &lt;juliajones@biology.sdu.dk&gt;</p>
<p>Roberto Salguero-Gomez &lt;rob.salguero@zoo.ox.ac.uk&gt;</p>
<p>Danny Buss &lt;dlb50@cam.ac.uk&gt;</p>
<p>Patrick Barks &lt;patrick.barks@gmail.com&gt;</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">CompadreFlag</span> <span class="op">&lt;-</span> <span class="fu">cdb_flag</span><span class="op">(</span><span class="va">Compadre</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># only check whether matA has missing values, and whether matA is ergodic</span></span></span>
<span class="r-in"><span><span class="va">CompadreFlag</span> <span class="op">&lt;-</span> <span class="fu">cdb_flag</span><span class="op">(</span><span class="va">Compadre</span>, checks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"check_NA_A"</span>, <span class="st">"check_ergodic"</span><span class="op">)</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Patrick Barks, Danny Buss, Roberto Salguero-Gomez, Iain Stott, William K. Petry, Tamora James, Owen Jones, Julia Jones, Gesa Römer, Sam Levin.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

